%-----------------------------------------------------%
% for colours
\usepackage{color}
\usepackage{inconsolata}
% from code expert "ce_"
\definecolor{ce_yellow}{rgb}{0.8,0.6,0.1} % Adjusted for better visibility on white background
\definecolor{ce_gray}{rgb}{0.4,0.4,0.4}  % Gray for comments
\definecolor{ce_lime}{rgb}{0.2,0.6,0.2}  % Lime for keywords like "this"
\definecolor{ce_pink}{rgb}{0.8,0.1,0.3}  % Pink for symbols and control words
\definecolor{ce_cyan}{rgb}{0.1,0.4,0.6}  % Cyan for keywords
\definecolor{ce_violet}{rgb}{0.5,0.1,0.5} % Violet for numbers and constants
\definecolor{ce_back}{rgb}{1,1,1}         % White background for light mode
\definecolor{ce_white}{rgb}{0,0,0}       % Black text for light mode
\definecolor{ce_blue}{rgb}{0.2,0.2,0.9} % 

\definecolor{ce_green}{rgb}{0.0,0.4,0.1} % 

\newcommand{\ceyellow}[1]{\textcolor{ce_yellow}{#1}}
\newcommand{\cegray}[1]{\textcolor{ce_gray}{#1}}
\newcommand{\celime}[1]{\textcolor{ce_lime}{#1}}
\newcommand{\cepink}[1]{\textcolor{ce_pink}{#1}}
\newcommand{\cecyan}[1]{\textcolor{ce_cyan}{#1}}

\newcommand{\ceviolet}[1]{\textcolor{ce_violet}{#1}}

%----------------------------------------------------%
% as close to CodeExpert as I could get it
\usepackage{listings}

\lstdefinestyle{CodeExpert}{
    language=C++,
    basicstyle=\ttfamily\linespread{0.8}\color{ce_white},
    numbers=none,
    aboveskip=0mm,
    belowskip=0mm,
    frame = none,
    numberstyle=\tiny\color{ce_gray},
    backgroundcolor = \color{ce_back},
    keywordstyle=\color{ce_violet},
    commentstyle=\color{ce_green},
    stringstyle=\color{ce_yellow},
    morecomment=[n][\color{ce_pink}]{\#}{\ },
    literate=
    *{./}{{{\color{ce_pink}./}}}2
    {.^}{{{\color{ce_pink}.^}}}2
    {=}{{{\color{ce_pink}= }}}1
    {==}{{{\color{ce_pink}== }}}1
    {+}{{{\color{ce_pink}+}}}1
    {*}{{{\color{ce_pink}*}}}1
    {-}{{{\color{ce_pink}-}}}1
    {&}{{{\color{ce_pink}\char`\& }}}1 % Correctly rendering &
    {&&}{{{\color{ce_pink}\&\& }}}2 % Handling &&
    {-->}{{$\rightarrow$}}3 % Rendering --> as â†’
    {<*}{{{\color{ce_pink}< }}}1
    {*>}{{{\color{ce_pink}> }}}1
    {<<}{{{\color{ce_pink}<< }}}2
    {>>}{{{\color{ce_pink}>> }}}2
    {->}{{{\color{ce_pink}->}}}2
    {1}{{{\color{ce_blue}1}}}1
    {2}{{{\color{ce_blue}2}}}1
    {3}{{{\color{ce_blue}3}}}1
    {4}{{{\color{ce_blue}4}}}1
    {5}{{{\color{ce_blue}5}}}1
    {6}{{{\color{ce_blue}6}}}1
    {7}{{{\color{ce_blue}7}}}1
    {8}{{{\color{ce_blue}8}}}1
    {9}{{{\color{ce_blue}9}}}1
    {0}{{{\color{ce_blue}0}}}1
    {this}{{{\color{ce_lime}this}}}1
    {if }{{{\color{ce_pink}if }}}1
    %{do}{{{\color{ce_pink}do}}}1
    {for}{{{\color{ce_pink}for }}}1
    {else}{{{\color{ce_pink}else }}}1
    {then}{{{\color{ce_pink}then }}}1
    {break}{{{\color{ce_pink}break }}}1
    {continue}{{{\color{ce_pink}continue}}}1
    {public}{{{\color{ce_pink}public}}}1
    {private}{{{\color{ce_pink}private}}}1
    {while}{{{\color{ce_pink}while }}}1
    {continue}{{{\color{ce_pink}continue }}}1
    {nullptr}{{{\color{ce_violet}nullptr}}}1
    {NULL}{{{\color{ce_violet}NULL}}}1,
}

\lstset{
    basicstyle=\ttfamily,
    frame=tb,
    aboveskip=1mm,
    belowskip=1mm,
    showstringspaces=true,
    columns=flexible,
    breaklines=true,
    breakatwhitespace=true,
    tabsize=2,
}

% Define a custom environment for code blocks
\newenvironment{codeblock}{%
  \lstset{style=CodeExpert}%
  \begin{lstlisting}%
}{%
  \end{lstlisting}%
}
\newcommand{\code}[1]{\lstinline[style=CodeExpert]!#1!}